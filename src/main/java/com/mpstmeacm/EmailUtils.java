package com.mpstmeacm;

import com.resend.*;
import com.resend.core.exception.ResendException;
import com.resend.services.emails.model.CreateEmailOptions;
import com.resend.services.emails.model.CreateEmailResponse;

public class EmailUtils {
    public static void sendEmail(String email, String fName, String inviteLink, String department) {
        Resend resend = new Resend(Config.getResendToken());
        CreateEmailOptions params = CreateEmailOptions.builder()
                .from("ACM MPSTME <noreply@mpstmeacm.com>")
                .to(email)
                .subject("Congratulations for getting accepted at ACM MPSTME")
                .html("<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"><html dir=\"ltr\" lang=\"en\"><head><meta content=\"text/html; charset=UTF-8\" http-equiv=\"Content-Type\"/><meta name=\"x-apple-disable-message-reformatting\"/></head><div style=\"display:none;overflow:hidden;line-height:1px;opacity:0;max-height:0;max-width:0\">Invitation to ACM MPSTME<div></div></div><body style=\"background-color:rgb(255,255,255);margin-top:auto;margin-bottom:auto;margin-left:auto;margin-right:auto;font-family:ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;;padding-left:0.5rem;padding-right:0.5rem\"><table align=\"center\" width=\"100%\" border=\"0\" cellPadding=\"0\" cellSpacing=\"0\" role=\"presentation\" style=\"max-width:500px;border-width:1px;border-style:solid;border-color:rgb(122,190,235);border-radius:0.25rem;margin-top:40px;margin-bottom:40px;margin-left:auto;margin-right:auto;padding:20px;position:relative\"><tbody><tr style=\"width:100%\"><td><table align=\"center\" width=\"100%\" border=\"0\" cellPadding=\"0\" cellSpacing=\"0\" role=\"presentation\" style=\"margin-top:32px\"><tbody><tr><td><img alt=\"ACM LOGO\" height=\"60\" src=\"https://mpstme.acm.org/logo.png\" style=\"display:block;outline:none;border:none;text-decoration:none;margin-top:0px;margin-bottom:0px;margin-left:auto;margin-right:auto;background-color:rgb(0,0,0);border-radius:9999px;padding:0.75rem\" width=\"60\"/></td></tr></tbody></table><h1 style=\"color:rgb(0,0,0);font-size:22px;font-weight:400;text-align:center;padding:0px;margin-top:30px;margin-bottom:30px;margin-left:0px;margin-right:0px\"><strong>Hello " + fName + " you have been accepted as " + department + " executive at ACM MPSTME!</strong></h1><p style=\"font-size:14px;line-height:24px;margin:16px 0;color:rgb(0,0,0)\">Hello <strong> " + fName + ",</strong></p><p style=\"font-size:14px;line-height:24px;margin:16px 0;color:rgb(0,0,0)\">We are delighted to inform you that you have been selected to join our team at ACM as a <strong> " + department + " </strong> <!-- -->executive! Please join the server by clicking the button below and start your journey at ACM. We will also be adding you in our WhatsApp group soon so stay tuned!</p><table align=\"center\" width=\"100%\" border=\"0\" cellPadding=\"0\" cellSpacing=\"0\" role=\"presentation\" style=\"text-align:center;margin-top:32px;margin-bottom:32px\"><tbody><tr><td><a href=\"" + inviteLink + "\" style=\"line-height:100%;text-decoration:none;display:inline-block;max-width:100%;background-color:rgb(56,148,195);border-radius:0.25rem;color:rgb(255,255,255);font-size:12px;font-weight:600;text-decoration-line:none;text-align:center;padding-left:1.25rem;padding-right:1.25rem;padding-top:0.75rem;padding-bottom:0.75rem;padding:12px 20px 12px 20px\" target=\"_blank\"><span><!--[if mso]><i style=\"mso-font-width:500%;mso-text-raise:18\" hidden>&#8202;&#8202;</i><![endif]--></span><span style=\"max-width:100%;display:inline-block;line-height:120%;mso-padding-alt:0px;mso-text-raise:9px\">Join Our Discord</span><span><!--[if mso]><i style=\"mso-font-width:500%\" hidden>&#8202;&#8202;&#8203;</i><![endif]--></span></a></td></tr></tbody></table><hr style=\"width:100%;border:none;border-top:1px solid #eaeaea;border-width:1px;border-style:solid;border-color:rgb(234,234,234);margin-top:26px;margin-bottom:26px;margin-left:0px;margin-right:0px\"/><p style=\"font-size:12px;line-height:24px;margin:16px 0;color:rgb(102,102,102)\">If you were not expecting this invitation, you can ignore this email. In case of any doubts, please contact<!-- --> <a href=\"https://wa.me/919326979089\">Yash Kalbhor</a> or<!-- --> <a href=\"https://wa.me/918928179342\">Nidhi Shah</a></p></td></tr></tbody></table></body></html>\n")
                .build();
        try {
            CreateEmailResponse data =  resend.emails().send(params); //client.emails().send(params);
        } catch (ResendException e) {
            e.printStackTrace();
        }
    }
}
